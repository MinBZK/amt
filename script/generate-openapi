#!/bin/bash
# Wrapper script for OpenAPI Generator with post-processing
#
# This script generates the OpenAPI client with ruff post-processing enabled.
# Usage: ./script/generate-openapi

set -e

# Set the post-processing command for Python files
# Use 'ruff format' which exits 0 even when it formats files
export PYTHON_POST_PROCESS_FILE="ruff format"

# Run the OpenAPI generator with the config file
openapi-generator generate -c amt/algoritmeregister/openapi/v1_0/specs/config.json --global-property apis,apiTests=false,models,modelDocs=false,supportingFiles

echo "OpenAPI client generated successfully with ruff formatting applied"
